# 🧸사당동

![사당동_Banner](https://user-images.githubusercontent.com/81402579/182826360-751f581c-6e59-41ad-988f-5bccd454dd60.png)
   
   
### Links
[시연영상](https://www.youtube.com/watch?v=jTech_pwjCU)   
[Team Notion](https://www.notion.so/2-cef47c67331c4b0d9445d55302fc51de)   
[Front-End Github](https://github.com/damiiya/sadangdong)   
[Blockchain Github](https://github.com/eunchong2lee/SDD_Blockchain)   

## 👨‍💻 프로젝트 소개
### 사실은 오래전부터  당신만을 위한  동물을 준비해왔다우
실시간 NFT 경매 마켓플레이스

#### [사당동 보러가기](https://sadangdong.com)   

나만의 컬렉션을 만들어 아이템을 민팅(제작)하고 판매까지!
최근 들어 NFT의 열풍이 불고있지만 NFT라는 생소한 개념과 기존 NFT 마켓플레이스의 복잡한 UI로 진입 장벽높습니다.
사당동 프로젝트는 직관적인 UI로 NFT마켓플레이스의 진입장벽을 낮추고, 실시간 NFT 경매를 통해 창작작품의 가치를 투명하게 인정받는 것을 목표료 합니다.



### 프로젝트 기간 (6주)
* 2022/06/24 ~ 2022/08/04

### Member

| 임형섭 | 이담 | 이은총 | 임정현 | 이재석 | 배재은|
|---|---|---|---|---|---|
| ![임형섭](https://user-images.githubusercontent.com/81402579/182827822-4087f05a-6840-4ab1-8abe-166ca9148f3f.png) | ![이담](https://user-images.githubusercontent.com/81402579/182827862-ae788d4f-e9f8-464d-86a7-bc6e1e0d1d9c.png) | ![이은총](https://user-images.githubusercontent.com/81402579/182827904-46ba2c33-1d81-4955-9f21-b3b1cd3fed24.png) | ![임정현](https://user-images.githubusercontent.com/81402579/182827939-3c44ae0a-b3af-4ed7-923a-becf213b569e.png) | ![이재석](https://user-images.githubusercontent.com/81402579/182827971-43c80f72-1a8d-4590-b88c-23331c8af83e.png) | ![배재은](https://user-images.githubusercontent.com/81402579/182828106-845f70a2-14d9-47dc-853c-3cf813a6d056.png) |
| `Front-End` | `Front-End` | `Back-End` | `Back-End` | `Back-End` | `Designer` |
   
   
## BackEnd 핵심기능

* solidity smart contract 민팅, 블록체인 거래기능 구현
* 블록체인 프라이빗 네트워크 구축
* socket.io 실시간 경매 및 채팅기능 구현



## 💎Service Architecture
![서비스아키텍처](https://user-images.githubusercontent.com/81402579/182828697-68b05924-6d99-4650-8aed-ba249d7eda59.png)
***

## 🛠 Tech & Platfrom
### Front-end
<div>
<img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
<img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=black">
<img src="https://img.shields.io/badge/redux-764ABC?style=for-the-badge&logo=redux&logoColor=white">
<img src="https://img.shields.io/badge/html-E34F26?style=for-the-badge&logo=html5&logoColor=white">
<img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white">
<br>
<img src="https://img.shields.io/badge/socket.io-ffffff?style=for-the-badge&logo=socket.io&logoColor=black">
<img src="https://img.shields.io/badge/cloudfront-FF9900?style=for-the-badge&logo=amazon aws&logoColor=white">
<img src="https://img.shields.io/badge/route53-232F3E?style=for-the-badge&logo=amazon aws&logoColor=white">
<img src="https://img.shields.io/badge/amazon s3-569A31?style=for-the-badge&logo=amazon s3&logoColor=white">
<img src="https://img.shields.io/badge/ipfs-65C2CB?style=for-the-badge&logo=ipfs&logoColor=white">
<img src="https://img.shields.io/badge/ethers.js-3C3C3D?style=for-the-badge&logo=ethereum&logoColor=white">
</div>

### Back-end
<div>
<img src="https://img.shields.io/badge/node.js-339933?style=for-the-badge&logo=node.js&logoColor=white">
<img src="https://img.shields.io/badge/nestjs-E0234E?style=for-the-badge&logo=nestjs&logoColor=white">
<img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
<img src="https://img.shields.io/badge/typescript-3178C6?style=for-the-badge&logo=typescript&logoColor=white">
<img src="https://img.shields.io/badge/socket.io-ffffff?style=for-the-badge&logo=socket.io&logoColor=black">
<img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white">
<img src="https://img.shields.io/badge/swagger-85EA2D?style=for-the-badge&logo=swagger&logoColor=white">
<br>
<img src="https://img.shields.io/badge/solidity-363636?style=for-the-badge&logo=solidity&logoColor=white">
<img src="https://img.shields.io/badge/truffle-000000?style=for-the-badge&logo=truffle&logoColor=white">
<img src="https://img.shields.io/badge/jsonrpc-000000?style=for-the-badge&logo=json&logoColor=white">
<img src="https://img.shields.io/badge/geth-000000?style=for-the-badge&logo=geth&logoColor=white">
<br>
<img src="https://img.shields.io/badge/aws ec2-FF9900?style=for-the-badge&logo=amazon ec2&logoColor=white">
<img src="https://img.shields.io/badge/nginx-009639?style=for-the-badge&logo=nginx&logoColor=white">
<img src="https://img.shields.io/badge/amazon s3-569A31?style=for-the-badge&logo=amazon s3&logoColor=white">
</div>

### Tools
<div>
<img src="https://img.shields.io/badge/vscode-007ACC?style=for-the-badge&logo=visual studio code&logoColor=white">
<img src="https://img.shields.io/badge/slack-4A154B?style=for-the-badge&logo=slack&logoColor=white">
<img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white">
<img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">
</div>

### 🛠기술 스택 선정이유
1. Node.js
2. NestJS
   - 부트캠프 과정을 수료하는 동안 Node.js의 Express 프레임워크를 학습했습니다. Express는 Node.js 프레임 워크로 1위를 지키고 있으며 수많은 개발자들에게 개발 규칙을 강제하여 코드 및 구조의 통일성을 향상시킬 수 있으며 가장 많이 사용되기 때문에 구글링을 통해 충분한 레퍼런스를 검색할 수 있습니다. 또한 웹서버를 빠르게 구현하기 위해 개발시에 구조에 대한 자유도가 높습니다.
   - 자유도가 높은 많큼 사용자마다 아키텍쳐가 달라 협업 과정에서 다른 사람이 코드를 봤을 때 이해 하기가 쉽지 않습니다.
   - 프로젝트 규모가 작은 상황 속에서 Express를 배웠으니 Express를 써야겠다는 수동적인 생각보다는 확장 가능하며 유지 관리가 쉽고 서버 애플리세이션을 쉽게 개발 할 수 있는 NestJS를 도입하기로 하였습니다.   
      <details>
      <summary>NestJS 특징</summary>
         <div markdown="1">
            - TypeScript 및 OOP (객체 지향 프로그래밍), FP (기능 프로그래밍), FRP (기능 반응성 프로그래밍) 요소를 결합합니다. (효율성 증가)<br>
            - Nestjs는 typescript를 적극적으로 도입함으로서 서버 어플리케이션 개발 시 발생할 수 있는 오류들을 사전에 방지할 수 있도록 했습니다. 또한 모듈로 감싸는 형태로 개발하기 때문에 모듈 별로 테스트 코드를 쉽게 작성할 수 있도록 구현되어 있습니다. (안정적)<br>
            - Nestjs는 module을 통해 확장이 용이하도록 설계되어 있습니다. 실제로 사용해보면 module을 통해 코드적으로, 논리적으로 구분한다는 장점을 크게 느끼실 수 있습니다. 또한 nestjs는 기본적으로 마이크로서비스 아키텍처 개발 스타일을 제공합니다.<br>
            - Nest는 typescript를 사용하여 DI(Dependency Injection), IoC(Inversion of Control), 모듈을 통한 구조화 등의 기술을 통해 생산성이 높습니다.<br> 
            - 간편하게 Validation로직을 작성할 수 있습니다. (파이프 pip 사용)<br>
         </div>
      </details>
3. socket.io
   - socket.io로 실시간 경매의 가격제시 및 채팅기능으로 유저들의 관심도를 올리기 위해 사용했습니다.
4. MySQL
   - MySQL은 관계형 데이터베이스 관리 시스템(RDBMS)이며, 다중 사용자와 다중 스레드를 지원해준다.
   -  하나의 데이터를 여러 항목으로 집합시켜 표시한다. 관계형 데이터베이스 관리 시스템은 서로 관계를 맺는 여러 개의 테이블에 항목을 나누어 저장하고, 필요한 테이블에서 필요한 부분만 가져다가 사용이 가능기 때문에 선택 했습니다.
5. swagger
   - API 문서를 자동화하고, 명세서를 통해 프론트엔드와의 소통을 원할이 하기 위해 선택했습니다.
6. solidity
   - 프라이빗 네트워크 구축을 위해 선택했습니다.
   - truffle
      - 스마트컨트렉트를 컴파일 및 배포를 위해 사용했습니다.      
7. Geth
   - 기존의 널리 퍼져있는 테스트 네트워크는 한정직인 코인과 트랜잭션 속도 저하 등으로 인해 프라이빗 네트워크를 구축을 위해 선택 했습니다.
   - 프라이빗 네트워크는 직접 체굴 하기 때문에 많은 코인으로 테스트를 해볼 수가 있고, 블록을 쌓는 속도가 빨라 트랜젝션 속도가 빠름니다.
8. json-RPC
   - 이더리움과 상호 작용하는 json-PRC를 이용하여 solidiy 와 nestjs 간 통신을 위해 선택 했습니다. 



## 💥Trouble Shooting
### 경매 가스비 관리
   - 유저가 경매에 올릴 때 가스비가 발생하는데 아무도 제안을 하지 않을 경우 경매가 끝났을 경우 다시 블록체인에 올려야 판매가 가능하기 때문에 유저들이 가스비를 또 내야하는 경우가 생김
   - 문제분석: 블록체인에 올리는데 가스비가 지속적으로 들기 때문에 유저 입장에서 부담될 수 있다고 생각함
   - 해결방안: 아무런 제안 없이 경매가 끝나도 블록체인 스마트 컨트랙트 상에 삭제가 되지 않고 유지 시켜 가스비에 대한 부담을 줄이자!
   - 의사결정: 아무런 제안 없이 경매가 끝나도 블록체인 스마트 컨트랙트 상에 삭제가 되지 않고 유지시키고 웹페이지 상에서만 없어진 것처럼 표시하여 다시 경매 시작 버튼을 누르면 가스비 없이 바로 경매 시작을 가능하게 함

### 서버 과부하
   - 유저가 여러명 동시 접속 시 서버 부하가 많이 생기면서 오류 발생
   -  문제분석: 동시 접속자가 많아지면서 서버가 과부하가 걸리고 제대로된 서비스가 되지 않음
   -  해결방안
      1. 서버 스팩을 올려서 처리 속도를 개선한다.
      2. Nginx의 로드 밸런싱을 이용하여 동시에 여러 서버를 돌린다.
   - 의사결정:   
      - Nginx의 로드 밸런싱을 이용하여 동시에 여러 서버를 돌린다.   
      - 서버의 스팩업은 한계가 있으므로, 로드밸런싱을 하면 차후 서버가 멈춰도 서비슷는 계속 이용할 수 있음.   
      - WAS부하가 줄어서 효율적인 서비스 
  
## 👩‍👧‍👧유저 피드백
   > "아이템 생성이 얼마나 걸리는지 알 수가 없어요! 그리고 너무 오래걸리는 것 같아요!"   
 
### ISSUE   
   - 아이템 민팅 시 IPFS에 이미지를 저장하고, 토큰생성을 위해 블록을 쌓아야하는데 시간이 오래 걸리고, 민팅이 되는 동안 사
용자가 확인할 수 있는 화면이 없다는 피드백   
### Back-end   
   - 블록체인에 블록이 올라가는 트랜잭션 시간이 약간씩 소요되기 때문에 트랜잭션 서명을 하면 카피 데이터로 민팅된 아이템
을 보이게 하여 유저들의 민팅 대기 시간을 줄임   
### Front-end
   - 아이템 민팅 버튼을 누르면 스피너 화면을 따로 렌더시켜줘서 사용자에게 민팅이 되고 있다고 인지 켜주는 것으로 개선함

## 💬more info
<details>
<summary>API 명세서</summary>
<div markdown="1">
<img src ="https://user-images.githubusercontent.com/81402579/182878896-8bdbddc2-8244-48b7-b64a-3ea80a607cc2.png">
<img src = "https://user-images.githubusercontent.com/81402579/182878973-f3404687-e1e8-4602-8e73-8efcfe1a2ac4.png">
<img src = "https://user-images.githubusercontent.com/81402579/182879041-0c9fb569-e403-4b38-96cd-6bddb40c8ba9.png">
<img src = "https://user-images.githubusercontent.com/81402579/182879104-431ceec9-54e6-414a-843a-fc414f2288b9.png">
</div>
</details>
<details>
<summary>DB ERD</summary>
<div markdown="1">
<img src = "https://user-images.githubusercontent.com/81402579/182881733-be68331b-507b-49cd-ab92-948da9ac8ea9.png">
</div>
</details>
<details>
<summary>WireFrame</summary>
<div markdown="1">
<img src = "https://user-images.githubusercontent.com/81402579/182880143-1d755ed6-131d-4ece-94d2-19d236f6b1ea.png">
<img src = "https://user-images.githubusercontent.com/81402579/182880300-0aa55f0e-503a-49f3-bd64-6e20a5dec42b.png">
</div>
</details>
